function _addFounders(IManager.FounderParams[] calldata _founders) internal { uint256 numFounders = _founders.length; uint256 totalOwnership; unchecked { for (uint256 i; i < numFounders; ++i) { uint256 founderPct = _founders[i].ownershipPct; if (founderPct == 0) continue; if ((totalOwnership += uint8(founderPct)) > 100) revert INVALID_FOUNDER_OWNERSHIP(); uint256 founderId = settings.numFounders++; Founder storage newFounder = founder[founderId]; newFounder.wallet = _founders[i].wallet; newFounder.vestExpiry = uint32(_founders[i].vestExpiry); newFounder.ownershipPct = uint8(founderPct); uint256 schedule = 100 / founderPct; uint256 baseTokenId; for (uint256 j; j < founderPct; ++j) { baseTokenId = _getNextTokenId(baseTokenId); tokenRecipient[baseTokenId] = newFounder; emit MintScheduled(baseTokenId, founderId, newFounder); (baseTokenId += schedule) % 100; } } settings.totalOwnership = uint8(totalOwnership); settings.numFounders = uint8(numFounders); } }

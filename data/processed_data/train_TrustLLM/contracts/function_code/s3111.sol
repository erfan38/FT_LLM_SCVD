function raiseDispute(bytes calldata _data, bytes calldata _signature) external override { address signer = SignatureDecoder.recoverKey( keccak256(_data), _signature, 0 ); (address _project, uint256 _task, , , ) = abi.decode( _data, (address, uint256, uint8, bytes, bytes) ); require(_project == address(this), "Project::!projectAddress"); if (_task == 0) { require( signer == builder || signer == contractor, "Project::!(GC||Builder)" ); } else { require( signer == builder || signer == contractor || signer == tasks[_task].subcontractor, "Project::!(GC||Builder||SC)" ); if (signer == tasks[_task].subcontractor) { require(getAlerts(_task)[2], "Project::!SCConfirmed"); } } IDisputes(disputes).raiseDispute(_data, _signature); }

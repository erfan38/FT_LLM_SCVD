function refreshedAssetPerBaseInUQ(address _asset) public override returns (uint) { AssetInfo storage assetInfo = assetInfoOf[_asset]; (, int basePrice, , , ) = baseAggregator.latestRoundData(); (, int quotePrice, , , ) = assetInfo.aggregator.latestRoundData(); require(basePrice > 0 && quotePrice > 0, "ChainlinkPriceOracle: NEGATIVE"); uint assetPerBaseInUQ = ((uint(basePrice) * 10**assetInfo.decimals).mulDiv( FixedPoint112.Q112, (uint(quotePrice) * 10**baseDecimals) ) * 10**assetInfo.answerDecimals) / 10**baseAnswerDecimals; assetInfo.lastAssetPerBaseInUQ = assetPerBaseInUQ; return assetPerBaseInUQ; }

function claimRewards(address beneficiary) external virtual override returns (uint256) { require( msg.sender == beneficiary || _roleManager().hasRole(Roles.GAUGE_ZAP, msg.sender), Error.UNAUTHORIZED_ACCESS ); _userCheckpoint(beneficiary); uint256 amount = perUserShare[beneficiary]; if (amount <= 0) return 0; perUserShare[beneficiary] = 0; controller.inflationManager().mintRewards(beneficiary, amount); emit RewardClaimed(beneficiary, amount); return amount; }

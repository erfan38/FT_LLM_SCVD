function lzReceive( uint16 srcChainId, bytes memory srcAddress, uint64, bytes memory payload ) external override { require(fantomSender != address(0), "NOT_INITIALIZED"); require( msg.sender == endpoint && srcChainId == fantomChainId && addressFromPackedBytes(srcAddress) == fantomSender, "UNAUTHORIZED_CALLER" ); (address redemptionAddress, uint256 amountWEVE) = abi.decode( payload, (address, uint256) ); require( (redeemedWEVE += amountWEVE) <= eligibleWEVE, "cannot redeem more than eligible" ); (uint256 shareOfUSDC, uint256 shareOfVELO) = previewRedeem(amountWEVE); require( USDC.transfer(redemptionAddress, shareOfUSDC), "USDC_TRANSFER_FAILED" ); require( VELO.transfer(redemptionAddress, shareOfVELO), "VELO_TRANSFER_FAILED" ); }

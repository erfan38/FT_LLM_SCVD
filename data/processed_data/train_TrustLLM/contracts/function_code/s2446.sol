function _lockCurve() internal { if(cooldown) { return; } uint256 crvBalance = IERC20(crvBpt).balanceOf(address(this)); if(crvBalance > 0){ IERC20(crvBpt).safeTransfer(staker, crvBalance); } uint256 crvBalanceStaker = IERC20(crvBpt).balanceOf(staker); if(crvBalanceStaker == 0){ return; } IStaker(staker).increaseAmount(crvBalanceStaker); uint256 unlockAt = block.timestamp + MAXTIME; uint256 unlockInWeeks = (unlockAt/WEEK)*WEEK; if(unlockInWeeks.sub(unlockTime) > 2){ IStaker(staker).increaseTime(unlockAt); unlockTime = unlockInWeeks; } }
